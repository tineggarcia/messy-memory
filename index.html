<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name=“description” content='Messy Memory, a different kind of memory game, memorise cards and position'>
    <meta name="keywords" content="Memory game, mario memoery game">

    <!--Fontawesome and Google Fonts link -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Raleway%7CRighteous" rel="stylesheet">
    <!---->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="assets/css/style.css">
    <title>Messy Memory Game</title>

    <script>

        let array = [1, 2, 3, 4, 5, 6];
        let shuffledArray = array.sort((a, b) => 0.5 - Math.random());

        sessionStorage.setItem('game_level', 'hard');

        var game_level = sessionStorage.getItem('game_level');
        var easy_level_highscore = localStorage.getItem('easy_level_highscore');
        var hard_level_highscore = localStorage.getItem('hard_level_highscore');

        if (game_level == null) {
            game_level = 'easy';
            sessionStorage.setItem('game_level', game_level);

        }

        if (easy_level_highscore == null) {
            easy_level_highscore = '0';
            localStorage.setItem('easy_level_highscore', easy_level_highscore);
        }

        if (hard_level_highscore == null) {
            hard_level_highscore = '0';
            localStorage.setItem('hard_level_highscore', hard_level_highscore);
        }

        document.addEventListener('DOMContentLoaded', function () {

            if (game_level=="easy") {
                document.getElementById("easy_level").style.display="block";
                document.getElementById("hard_level").style.display="none";
                array = [1, 2, 3, 4];
            } else {
                document.getElementById("easy_level").style.display="none";
                document.getElementById("hard_level").style.display="block";
                array = [1, 2, 3, 4,5,6];
            }

            shuffledArray = array.sort((a, b) => 0.5 - Math.random());

            for (let i=0; i<shuffledArray.length; i++) {
                let imgElem = document.getElementById(game_level + "_image"+ (i+1));
                imgElem.src = "assets/images/image" + shuffledArray[i] + ".webp";

            }
        });

        var countTimer = 5;

        // Update the count down every 1 second
        var gametimer = setInterval(function() {

            // If the count down is over, write some text
            if (countTimer>0) {
                // document.getElementById("timeleft").innerHTML = countTimer;
            }
            if (countTimer <= 0) {
                shuffleImageDivs();
            }
            if (countTimer <-3) {
                clearInterval(gametimer);
                // document.getElementById("timeleft").innerHTML = "START!!!";
            }
            countTimer--;
        }, 1000);


        function shuffleImageDivs() {
            let reshuffleArray = array.sort((a, b) => 0.5 - Math.random());
            for (let i=0;i<array.length;i++) {
                let image_div = document.getElementById("div_" + game_level + "_image"+(i+1));
                image_div.appendChild(document.getElementById("div_" + game_level + "_image" + (reshuffleArray[i])).firstElementChild);
            }
        }

        function clearImageDivs() {
            let image_divs = document.querySelectorAll(".img_container");
            for (let image_div of image_divs) {
                image_div.style.backgroundImage = "url('assets/images/mariologo.png')";
            }
        }

        function allowDrop(ev) {
            ev.preventDefault();
        }

        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.id);
            ev.dataTransfer.setData("parent",ev.target.parentElement.id);
        }

        function drop(ev) {
            ev.preventDefault();
            var data = ev.dataTransfer.getData("text");
            var sourceDiv=document.getElementById(ev.dataTransfer.getData("parent"));
            ev.target.parentElement.appendChild(document.getElementById(data));
            sourceDiv.appendChild(ev.target);
            checkOk();
        }

        function checkOk() {
            let check=true;
            let images = document.querySelectorAll("img");
            for (let image of images) {
                if (!(image.parentElement.id.endsWith(image.id))) {
                    check = false;
                }
            }
            if (check) {
                alert("yehey u win!");
            }
        }

    </script>

</head>
<body>
<h1></h1>
<!--Header Logo-->
<div class="logo-flex">
    <img class="logo">
</div>


<!--Scores and Timer-->
<div class="scores-">
    <div class="scores">
        <div class="high-score"><h3>Hi-score:</h3></div>
        <div class="timer"><h3>Timer:</h3></div>
        <div class="user-score"><h3>Score:</h3></div>
    </div>
</div>

<!--Floating background for the game-->
<div class="game-container">


    <div id="easy_level"  class="container">
        <div class="row">
            <div class="col-sm-3"></div>
            <div class="col-sm-6">

                <div class="row easy_drop_div">
                    <div id="div_easy_image1" class="col-md-6 img_container easy">
                        <img id="easy_image1" class="img-thumbnail mx-auto d-block" draggable="true" alt="1" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)"/>
                    </div>
                    <div id="div_easy_image2" class="col-md-6 img_container easy">
                        <img id="easy_image2" class="img-thumbnail mx-auto d-block" draggable="true" alt="2" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)"/>
                    </div>
                </div>
                <div class="row easy_drop_div">
                    <div id="div_easy_image3" class="col-md-6 img_container easy">
                        <img id="easy_image3" class="img-thumbnail mx-auto d-block" draggable="true" alt="3" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)"/>
                    </div>
                    <div id="div_easy_image4" class="col-md-6 img_container easy">
                        <img id="easy_image4" class="img-thumbnail mx-auto d-block" draggable="true" alt="4" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)"/>
                    </div>
                </div>
            </div>
            <div class="col-sm-3"></div>
        </div>
    </div>

    <div id="hard_level" class="container">
        <div class="row">
            <div class="col-sm-1"></div>
            <div class="col-sm-10">
                <div class="row hard_drop_div">
                    <div id="div_hard_image1" class="col-sm-4 img_container hard">
                        <img id="hard_image1" class="img-thumbnail mx-auto d-block" draggable="true" alt="4" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)"/>
                    </div>
                    <div id="div_hard_image2" class="col-sm-4 img_container hard">
                        <img id="hard_image2" class="img-thumbnail mx-auto d-block" draggable="true" alt="4" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)"/>
                    </div>
                    <div id="div_hard_image3" class="col-sm-4 img_container hard">
                        <img id="hard_image3" class="img-thumbnail mx-auto d-block" draggable="true" alt="4" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)"/>
                    </div>
                </div>
                <div class="row hard_drop_div">
                    <div id="div_hard_image4" class="col-sm-4 img_container hard">
                        <img id="hard_image4" class="img-thumbnail mx-auto d-block" draggable="true" alt="4" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)"/>
                    </div>
                    <div id="div_hard_image5" class="col-sm-4 img_container hard">
                        <img id="hard_image5" class="img-thumbnail mx-auto d-block" draggable="true" alt="4" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)"/>
                    </div>
                    <div id="div_hard_image6" class="col-sm-4 img_container hard">
                        <img id="hard_image6" class="img-thumbnail mx-auto d-block" draggable="true" alt="4" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)"/>
                    </div>
                </div>

            </div>
            <div class="col-sm-1"></div>
        </div>
    </div>
    <!--    </div>-->

    <!--EASY Level starts here-->
    <div class="cards-area">
        <!--First Row of Cards Area-->
        <div class="about-card about-us-texts">
            <br>
        </div>

        <div class="about-card">

        </div>

        <!--2nd Row-->
        <div></div>
        <div class="about-card about-us-texts">
        </div>
    </div>
</div>
<script src="assets/js/script.js"></script>
</body>
</html>